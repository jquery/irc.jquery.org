[03:06:55] <jaubourg> ?tell mikesherov why on earth did you apologize to this self-entitled over-inflated moron? Look how he responds to it with his all-around loathing: after open-source is of poor quality because of contributors with big egos, we have students that aren't as reliable as Mr CTO is.
[03:06:56] <bot-t> jaubourg, Okay.
[05:17:34] <mikesherov> DaveMethvin: sorry I bailed yesterday, was super hectic for me
[05:17:38] <bot-t> (2 hours 10 mins ago) <jaubourg> tell mikesherov why on earth did you apologize to this self-entitled over-inflated moron? Look how he responds to it with his all-around loathing: after open-source is of poor quality because of contributors with big egos, we have students that aren't as reliable as Mr CTO is.
[05:17:55] <DaveMethvin> oh jaubourg
[05:18:08] <DaveMethvin> don't waste vitriol on  him
[05:18:13] <mikesherov> ha
[05:18:24] <mikesherov> so, .ready()
[05:18:36] <mikesherov> If you're uncomfortable, we should just revert
[05:18:44] <DaveMethvin> .ready() or not, here comes 1.8.1 :P
[05:18:51] <DaveMethvin> so
[05:18:56] <scott_gonzalez> DaveMethvin: Be careful, that might release too early :-P
[05:19:12] <mikesherov> ouch
[05:19:16] <mikesherov> the wound, she is fresh
[05:19:17] <DaveMethvin> we're reverting back to 1.7.2 behavior? Or something in between?
[05:19:28] <mikesherov> So, 1.7.2 is battle tested
[05:19:36] <mikesherov> 1.8 is experimental
[05:19:46] <mikesherov> 1.8.1 punts on IE
[05:19:49] <mikesherov> so far
[05:19:53] <scott_gonzalez> Is the new implementation smaller or just fires sooner?
[05:20:22] <DaveMethvin> the 2.0 implementation will just be a listener for DOMContentReady :)
[05:20:22] <mikesherov> scott_gonzalez: at this point, the use case is a bit edgy
[05:20:53] <scott_gonzalez> Were there complaints about .ready() firing too late?
[05:21:02] <jaubourg> what I don't like is the barely diguised IE sniffing
[05:21:14] <DaveMethvin> i've done worse
[05:21:14] * jaubourg goes back into his cave
[05:21:22] <jaubourg> so have I but meh
[05:21:24] <jaubourg> :P
[05:22:12] <DaveMethvin> so mikesherov yeah let's go back to the tested and true 1.7.2 way
[05:22:26] <scott_gonzalez> What was the reason behind the change in 1.8?
[05:22:34] <scott_gonzalez> Was it less code or just supposed to be more accurate?
[05:22:53] <DaveMethvin> ready in ie fires somewhat late
[05:23:07] <DaveMethvin> it was waiting for iframes to fully ready as well
[05:23:10] <DaveMethvin> which wasn't needed
[05:23:31] <DaveMethvin> but screw em
[05:23:32] <scott_gonzalez> Ok, so we were trying to fix an actual perf issues with .ready().
[05:23:46] <scott_gonzalez> But it backfired and now can fire too early in IE.
[05:23:50] <scott_gonzalez> correct?
[05:24:09] <DaveMethvin> right bc we're looking at readyState and they switch it too early
[05:24:23] <scott_gonzalez> Have we asked Tony Ross about this?
[05:24:41] <DaveMethvin> well we can see the problem so we'll need to back it out regardless
[05:24:43] <DaveMethvin> but we should
[05:24:58] <DaveMethvin> i have a few more that have accumulated in the past week
[05:25:14] <DaveMethvin> like the one where document[0] is document.frames[0]
[05:25:26] <scott_gonzalez> That one is crazy.
[05:25:46] <DaveMethvin> i don't mind that ie has bugs
[05:25:52] <DaveMethvin> we're not innocent either
[05:26:04] <DaveMethvin> but it bothers me that we have to wait 18 months or more for fixes each time
[05:26:19] <DaveMethvin> and 6 months out from a release they're telling us they can't tackle some problem
[05:26:29] <DaveMethvin> like the focus issues
[05:26:33] <scott_gonzalez> Oh, I meant ask Tony if he knows of a better detection.
[05:26:40] <scott_gonzalez> Though we should also tell him to fix the bug.
[05:26:50] <DaveMethvin> yeah
[05:27:02] <DaveMethvin> just venting ... :)
[05:27:07] <scott_gonzalez> :-)
[05:27:52] <scott_gonzalez> Every time I fight against focus in IE, I think of Back Home by Fort Minor.
[05:31:38] <mikesherov> ugh
[05:31:43] <mikesherov> can you guys see this?
[05:31:55] <mikesherov> Did my whole diatribe get lost?
[05:32:07] <DaveMethvin> you left the room at 8:24
[05:32:09] <DaveMethvin> mikesherov:
[05:32:16] <mikesherov> UGH
[05:32:25] <mikesherov> my wifi is being an asshoel
[05:32:30] <mikesherov> mikesherov: scott_gonzalez: at this point, the use case is a bit edgy
[05:32:30] <mikesherov> [08:20am]
[05:32:53] <mikesherov> well, no, 2.0 still won't be domcontentready
[05:32:57] <mikesherov> that's the whole poiint
[05:33:02] <mikesherov> DomContentReady can fire before jQuery is loaded
[05:33:10] <mikesherov> f you're lazy loading jQuery, DomContentReady has already fired
[05:33:19] <mikesherov> nd so, in 1.7.2, it checked for readyState === "complete", and if not, bound to DomContentLoaded and window.load
[05:33:31] <mikesherov> problem there is that when you have iframes on the page, readyState is "interactive", DomCOntentLoaded has already fired, and window.load doesn't fire until after the iframe loads!
[05:33:57] <DaveMethvin> sure but we don't need all that crazy doscroll stuff for example in 2.0
[05:34:23] <mikesherov> so, the whole gain here can be summed up as
[05:34:31] <mikesherov> if you lazy load jquery, in nonIE browsers, .ready() will fire before the iframes load
[05:34:39] <mikesherov> if you synchronously load jQuery, there is no gain
[05:34:49] <mikesherov> at first, I thought it was going to also work for IE9 and IE10, but they have no clue what "interactive" really means
[05:34:57] <mikesherov> or maybe they do, and I just don't
[05:35:03] <mikesherov> they fire interactive when the page has even been fully served! Which is what my unit proves
[05:35:11] <mikesherov> or would prove if swarm was apache instead of nginx :-/
[05:35:20] <mikesherov> so, I'm fine if we revert
[05:35:27] <mikesherov> or even if we hide the functionality behind jQuery.quickReady or something
[05:35:46] <mikesherov> I'm fine whatever we do
[05:35:55] <mikesherov> but at this point, it's gotta be your call, DaveMethvin
[05:36:07] <mikesherov> s of this moment, it *seems* to be isolated to Android 2.1
[05:36:22] <mikesherov> but going back to the cozy 1.7.2 blanket seems prudent
[05:36:48] <scott_gonzalez> mikesherov: Have you been introduced to Tony Ross?
[05:36:49] <DaveMethvin> i think we should go back to the 1.7.2 behavior for 1.8.1, and aim to clean this up for 2.0
[05:37:11] <scott_gonzalez> +1
[05:37:12] <mikesherov> scott_gonzalez: no
[05:37:19] <mikesherov> DaveMethvin: that sounds fine by me!
[05:37:28] <scott_gonzalez> Perhaps DaveMethvin should introduce you and you can talk to him about this.
[05:37:35] <scott_gonzalez> Tony Ross is our main contact at IE.
[05:37:40] <mikesherov> that would be great.
[05:37:56] <mikesherov> Doesn't solve the android 2.1 issueâ€¦ but would go a long way!
[05:38:19] <DaveMethvin> i will get a set of ie issues together and ping tony
[05:38:27] <mikesherov> DaveMethvin: I'll whip up that PR quickly. What should I do with the 5 unit tests I created for this feature?
[05:38:54] <mikesherov> cut them out? That's what rev. history is for?
[05:39:00] <DaveMethvin> i basically made one of them useless so we can pull that one out
[05:39:15] <DaveMethvin> yeah let's pull them all out
[05:39:46] <mikesherov> K. I'll keep the basic ones that prove document.ready() works so it's not a complete waste
[05:40:10] <scott_gonzalez> Ugh, I want to punch travis4all in the face.
[05:40:46] <scott_gonzalez> There's a bot going through every single NPM package and sending a pull request to add Travis-CI to the project.
[05:40:59] <DaveMethvin> omg
[05:41:20] <scott_gonzalez> Pretty obnoxious PR message and commit messages too: https://github.com/jquery/globalize/pull/118
[05:42:16] <jaubourg> scott_gonzalez: +1
[05:42:23] <jaubourg> got the same for JQDeferred
[05:44:30] <scott_gonzalez> Before I dig into this, does anyone know what the deal is with java applets? http://bugs.jqueryui.com/ticket/6031
[05:44:50] <scott_gonzalez> Is this something I should even be concerned about?
[05:45:41] <mikesherov> UGH
[05:45:46] <mikesherov> well, two things
[05:45:51] <mikesherov> 1. java applet, ugh
[05:45:55] <mikesherov> 2. FF 3.6.8
[05:45:58] <scott_gonzalez> Yeah
[05:46:08] <scott_gonzalez> I haven't tested it yet, so I'm not sure if it's still a problem.
[05:46:18] <jaubourg> damn, and I thought we had weird bugs
[05:46:21] <mikesherov> Does this behavior exhibit in FF14?
[05:46:21] <mikesherov> OK
[05:46:30] <scott_gonzalez> I'm tempted to just kick it back to the reporter and ask if the bug still exists.
[05:46:37] <jaubourg> Sounds a lot like a FF3.6 oddity
[05:46:40] <scott_gonzalez> Tabs had a major refactor and there have been lots of updates to FF.
[05:46:56] <scott_gonzalez> Also ask for a fiddle instead of a zip.
[05:47:32] <scott_gonzalez> Maybe he's not even using java applets anymore :-P
[05:48:00] <mikesherov> https://bugzilla.mozilla.org/show_bug.cgi?id=90268#c263
[05:48:02] <mikesherov> victory?
[05:49:11] <scott_gonzalez> maybe :-)
[05:49:18] <scott_gonzalez> I'll kick it back to the reporter and link to that.
[05:49:19] <scott_gonzalez> Thanks.
[09:20:27] <ryanneufeld> .
[09:23:31] <gibson042> fgtail
[10:19:39] <scott_gonzalez> http://bugs.jquery.com/ticket/12383 makes me sad
[10:20:13] <scott_gonzalez> gibson042: Don't you think this is unexpected by users?
[10:57:33] <ryanneufeld> scott_gonzalez: why does it make you sad?
[10:58:14] <ryanneufeld> johnbender: will you be around in about an hour to chat re: vagrant stuffs?
[11:00:17] <scott_gonzalez> ryanneufeld: Because nobody expects that behavior.
[11:00:33] <gibson042> scott_gonzalez: in many cases, but "fixing" it means outright blocking use cases like `.on("click", "html[modernizr-property]", handler)`
[11:00:52] <gibson042> err, "html[attribute] element"
[11:01:19] <scott_gonzalez> gibson042: Why not $( "html[attribute]" ).on( "click", "element", fn ) ?
[11:02:23] <gibson042> hmmm
[11:02:27] <gibson042> fair enough
[11:03:33] <gibson042> I could get behind a patch for this that wasn't too large and/or slow
[11:04:55] <scott_gonzalez> The PR was pretty small, didn't really investigate it for accuracy and speed though.
[11:36:20] <jaubourg> oh hai
[11:40:17] <ryanneufeld> hola
[11:40:29] <ryanneufeld> bonjour
[11:41:31] <ryanneufeld> am I drunk or doing something wroing... I'm having very odd results trying to animate the height of a div in chrome
[11:41:53] <ryanneufeld> sometimes it takes the durration, and others it just jumps to the end of the que... so bizzare
[11:41:53] <jaubourg> maybe the div is drunk?
[11:42:09] <ryanneufeld> hmmm
[11:42:11] <jaubourg> have you tried asking in #jquery?
[11:42:43] <ryanneufeld> I figured since i'm on the team it might be easier to ask the experts :P
[11:42:52] <jaubourg> looool
[11:43:02] <ryanneufeld> guess not... :(
[11:43:07] <Eviltwin> Ask in #javascript, they love jQuery questions
[11:43:11] <ryanneufeld> haha
[11:43:12] <jaubourg> no I mean, lol at myself
[11:43:16] <ryanneufeld> oh
[11:43:31] <jaubourg> for never knowing who I'm talking to on IRC ;)
[11:43:43] <ryanneufeld> ha, it only happened yesterday :p
[11:43:58] <ryanneufeld> I think it's forgivable
[11:44:38] <jaubourg> anyway, do you have a gist of what you're doing?
[11:45:11] <Eviltwin> jaubourg to the rescue!
[11:45:16] <ryanneufeld> not yet, but is there any known issues with animating to 100% height
[11:45:17] <ryanneufeld> ?
[11:46:12] <jaubourg> it depends on too many factors to answer... could be a CSS issue due to where the div is located in the DOM
[11:46:31] <jaubourg> jumpiness is known to happen but not something that won't respect timing
[11:46:34] <ryanneufeld> I'm building a fiddle now
[11:46:38] <jaubourg> cool
[11:46:48] <ryanneufeld> reduced test cases ftw
[11:47:03] <jaubourg> indeed
[11:48:03] <ryanneufeld> http://jsfiddle.net/ryanneufeld/kaufC/
[11:48:06] <Eviltwin> I lost my patience for the some of the particularly stupid questions in #jquery
[11:48:20] <Eviltwin> You call this reduced?
[11:48:20] <ryanneufeld> css is not my strong suit
[11:49:09] <ryanneufeld> Eviltwin: it's as reduced as it can be. not much to it
[11:49:51] <jaubourg> it's a 100% issue
[11:49:58] <jaubourg> if you put, say 1000 it will work
[11:49:59] <Eviltwin> Interesting, I see the number animating
[11:51:06] <ryanneufeld> yeah
[11:51:33] <jaubourg> problem is the starting height is in px, the ending height is in %... I don't remember how the internals work now but I'm not sure it ever worked
[11:51:37] <ryanneufeld> so my only option then would be to calc the height of the tallest column
[11:51:45] <jaubourg> you can still use height: container.height
[11:51:47] <ryanneufeld> and use that
[11:52:09] <ryanneufeld> jaubourg: I'm not sur I follow...
[11:52:09] <jaubourg> yeah, you have to provide an actual "real" value
[11:52:35] <jaubourg> $.animate({ height: container.height() })
[11:52:49] <jaubourg> maybe not container but you get the idea
[11:52:51] <ryanneufeld> .height ignores the css propertu?
[11:53:08] <jaubourg> it will return the height in pixel AFAIK
[11:53:21] <ryanneufeld> the current height
[11:53:24] <ryanneufeld> which woudl be 219px
[11:53:30] <ryanneufeld> shiza
[11:53:45] <jaubourg> "Get the current computed height" http://api.jquery.com/height/
[11:53:53] <Eviltwin> http://jsfiddle.net/kaufC/2/
[11:53:55] <Eviltwin> Huh
[11:54:15] <ryanneufeld> wat
[11:54:15] <b-ot> I am so sorry to hear that.My LADY GAGA....
[11:54:27] <Eviltwin> It's definitely animating
[11:54:32] <Eviltwin> The number
[11:54:38] <ryanneufeld> yeah
[11:55:19] <jaubourg> you're asking for trouble when using percent, it will update internally but it would also update internally, but, as you can see, you don't get the result you expect
[11:55:41] <jaubourg> lotsa internal updates in that sentence
[11:55:50] <ryanneufeld> heh
[11:56:06] <ryanneufeld> so, looks like my 'best' option is to get the heights of the children
[11:56:08] <jaubourg> maybe it's a genuine bug... did it work in 1.7.2?
[11:56:13] <ryanneufeld> nope
[11:56:18] <ryanneufeld> originally found it in 1.7.1
[11:56:46] <jaubourg> ok, so it's probably not the anim code so much as the actual handling of % for height in CSS
[11:57:16] <ryanneufeld> what I find interesting though is that it did work
[11:57:19] <ryanneufeld> once
[11:57:25] <ryanneufeld> more than once actually
[11:57:53] * ryanneufeld tries firefox
[11:58:06] * ryanneufeld has no luck in FF
[12:03:23] <Eviltwin> Huh, this works: http://jsfiddle.net/LkSnu/
[12:05:51] <Eviltwin> http://jsfiddle.net/LkSnu/1/
[12:06:03] <Eviltwin> It adds overflow: hidden
[12:06:09] <Eviltwin> But I think yours already had that
[12:07:48] <ryanneufeld> yeah
[12:07:58] <ryanneufeld> but that seems a bit messy
[12:08:36] <ryanneufeld> wait
[12:08:36] <ryanneufeld> no
[12:08:40] <ryanneufeld> that's what I wanted
[12:08:50] <Eviltwin> Yeah, I'm not sure why this works and yours doesn't
[12:08:57] <Eviltwin> But there's a lot of moving parts in yours
[12:11:28] <ryanneufeld> hmm
[12:11:29] <ryanneufeld> yeah
[12:42:24] <ryanneufeld> johnbender: yt?
[13:00:49] <DaveMethvin> mikesherov: you around?
[13:02:18] <mikesherov> hi
[13:05:15] <johnbender> ryanneufeld: yar!
[13:05:23] <ryanneufeld> Thar you is
[13:05:33] <johnbender> ryanneufeld: sorry for the late response what can I help you with
[13:05:49] <ryanneufeld> np, we're all busy people
[13:06:03] <ryanneufeld> I'm just trying to sort out what i should be doing with vagrant
[13:06:07] <johnbender> ryanneufeld: well, I am particularly interested in helping you get setup on vagrant
[13:06:13] <johnbender> ryanneufeld: what is your goal
[13:06:18] <johnbender> what is it that you want to work on in infra?
[13:06:34] <ryanneufeld> https://github.com/jquery/infrastructure/issues/68#issuecomment-7961935
[13:06:35] <ryanneufeld> yeah
[13:06:58] <johnbender> ryanneufeld: I'm asking you
[13:07:04] <ryanneufeld> oh
[13:07:08] <johnbender> vagrant is just a tool to help people work on the infrastructure
[13:07:14] <ryanneufeld> I have no idea, gnarf asked me to work on a how to
[13:07:23] <johnbender> ah! hahaha
[13:07:23] <johnbender> oko
[13:07:30] <ryanneufeld> and I really am not sure what the current state of things is
[13:07:30] <johnbender> *ok
[13:07:43] <mikesherov> DaveMethvin: here
[13:07:51] <johnbender> ryanneufeld: what's you involvment been with the infra project thusfar?
[13:07:54] <johnbender> *your
[13:08:04] <DaveMethvin> Sooooo ... DOMContentLoaded
[13:08:22] <mikesherov> Yeah, what about
[13:08:23] <ryanneufeld> also, is it safe to assume that if I fork a private repo, it stays that way? I helped gnarf get a couple scripts running durring teh hackathon
[13:08:24] <DaveMethvin> when that event fires, would you think the DOM Content had Loaded?
[13:08:30] <mikesherov> Yes
[13:08:34] <DaveMethvin> ahahahahhahaha
[13:08:41] <johnbender> ryanneufeld: yah it does, I have a fork
[13:08:45] <mikesherov> except not in IE9/10
[13:08:55] <johnbender> ryanneufeld: which scripts were they? why not try modifying them
[13:09:12] <DaveMethvin> would you expect the event to only fire once?
[13:09:24] <ryanneufeld> johnbender: I don't even remember now... :S it was something to do with the nginx stats
[13:09:31] <johnbender> ryanneufeld: kk
[13:09:42] <DaveMethvin> it looks like ie10 may be firing DOMContentLoaded twice
[13:10:00] <DaveMethvin> once with readyState==loaded and once with readyState==complete
[13:10:07] <johnbender> ryanneufeld: the best thing to do is to use vagrant to make an alteration to the servers in some fashion or another using Vagrant
[13:10:08] <DaveMethvin> gotta get a better repro case
[13:10:14] <johnbender> since that's the primary use case
[13:10:23] <johnbender> that is, make some alteration to the server config
[13:10:34] <johnbender> and then test it using vagrant
[13:10:38] <ryanneufeld> oic
[13:11:10] <johnbender> ryanneufeld: that's my thinking at least since that's the primary purpose of the vagrant setup
[13:11:19] <johnbender> gnarf: you around?
[13:11:28] <ryanneufeld> johnbender: so, i've gone through the basic vagrant how to from the site, and i can see how it works.
[13:11:30] <johnbender> I'm wondering if there's a small task/bug you could fix
[13:11:37] <johnbender> ryanneufeld: super basic
[13:11:45] <johnbender> (using vagrant)
[13:11:48] <ryanneufeld> I've looked at the readme
[13:11:49] <ryanneufeld> okay
[13:11:57] <mikesherov> DaveMethvin: are you saying, it isn't all me?
[13:12:15] <johnbender> ryanneufeld: in leiu of gnarf giving you something why don't you monkey around with the nginx config some more
[13:12:30] <ryanneufeld> johnbender: and from what I can tell it's meant to be used on the hosts themselves? or should I be able to stand up one of the servers locally?
[13:12:31] <DaveMethvin> mikesherov: yeah it's a confluence of changes
[13:12:32] <johnbender> add a route match 404 or something
[13:12:37] <mikesherov> DaveMethvin: we can expand the document.body test to apply to the DomContentLoaded event check
[13:12:44] <johnbender> ryanneufeld: you're standing up servers locally
[13:12:49] <ryanneufeld> ok
[13:12:57] <mikesherov> currently, for addEventListener browsers, we skip the "overzealous" document.body check
[13:13:11] <DaveMethvin> i was thinking we could have the domcontentloaded handler just double check that readystate==loaded maybe?
[13:13:17] <DaveMethvin> it shoudl be for everyone?
[13:13:19] <ryanneufeld> johnbender: okay, then which vm would be a good one to play with?
[13:13:24] <johnbender> ryanneufeld: I'm not sure which domain hosts an nginx instance, do you know or should I take a loook
[13:13:24] <mikesherov> readyState=="complete" you mean?
[13:13:28] <johnbender> ryanneufeld: :)
[13:13:37] <mikesherov> or check for interactive too?
[13:13:42] <ryanneufeld> johnbender: I'm not sure
[13:13:43] <mikesherov> : ducks
[13:13:48] * mikesherov ducks
[13:13:58] <johnbender> ryanneufeld: ok I'll look through the puppet manifests
[13:14:04] <johnbender> ryanneufeld: are you familiar with puppet?
[13:14:10] <DaveMethvin> belt, suspenders, duct tape
[13:14:11] <ryanneufeld> johnbender: smallish ammount
[13:14:32] <johnbender> ryanneufeld: the starting point is manifests/site.pp
[13:14:36] <ryanneufeld> johnbender: we were gonna use it here at work, but the project got back burnered by an exec
[13:14:58] <johnbender> the Vagrant config sets the hostname of the VM to match one of the nodes in that file
[13:15:01] <johnbender> puppet does the rest
[13:15:29] <mikesherov> DaveMethvin, lets brainstorm a bit
[13:15:33] <ryanneufeld> johnbender: nifty
[13:15:47] <DaveMethvin> mikesherov: i think i'll have a test case ready in a sec
[13:15:55] <johnbender> ryanneufeld: so, you can "up" any of the wordpress nodes and they should have nginx installed
[13:16:21] <johnbender> ryanneufeld: jq01 or jq01.stage
[13:16:41] <ryanneufeld> okay
[13:16:48] <ryanneufeld> lets give that a shot then
[13:16:51] <johnbender> ryanneufeld: is it clear from the README what that means in terms of vagrant commands?
[13:17:01] <ryanneufeld> cristal
[13:17:05] <johnbender> that's good news
[13:17:07] <johnbender> :D
[13:17:19] <ryanneufeld> however what each machine does, and why you'd be there... well, that's why we're talking :P
[13:17:19] <johnbender> ryanneufeld: let me know if you have questions
[13:17:22] <mikesherov> if you get me a test case, I can program around it
[13:17:32] <mikesherov> I already have my crazy partialLoad test case
[13:17:32] <johnbender> ryanneufeld: that's all in the puppet code
[13:17:39] <johnbender> ryanneufeld: for that you'll have to ask gnarf
[13:17:43] <johnbender> since I didn't write any of it
[13:17:46] <johnbender> ryanneufeld: although I take that back
[13:17:52] <ryanneufeld> :)
[13:17:53] <mikesherov> See, ARENT YOU GLAD WE PLAYED AROUND WITH INTERACTIVE!?
[13:17:53] <johnbender> ask me since I can spelunk and we can both learn
[13:18:05] <ryanneufeld> johnbender: that's the best way to learn
[13:18:28] <ryanneufeld> johnbender: I'll see if i can get this box up and running, see what I can do with it
[13:18:38] <johnbender> ryanneufeld: cool
[13:19:31] <ryanneufeld> as long as I'm actually helping and not just a PITA :p
[13:19:42] <johnbender> ryanneufeld: this is important
[13:19:48] <johnbender> especially for the hackathon in October
[13:20:05] <johnbender> ideally people should be able to dive in on infra without having to do anything other than install vagrant
[13:20:12] <johnbender> well
[13:20:22] <johnbender> assuming we make some portion of the infra code public
[13:20:33] <ryanneufeld> yeah, I'll be there in october
[13:20:43] <ryanneufeld> so my goal is to get up to speed with how things work
[13:20:51] <ryanneufeld> and what can/should be done and doing
[13:21:04] <DaveMethvin> mikesherov: try this page in ie10, you can use browserstack: http://methvin.com/detect/lab.html
[13:21:12] <johnbender> ryanneufeld: hopefully that's easier now
[13:21:15] <DaveMethvin> open dev tools
[13:21:32] <ryanneufeld> johnbender: squeeze64.box is rather large :P
[13:21:50] <DaveMethvin> momma got a squeeze64.box, daddy never sleeps at night
[13:22:09] <ryanneufeld> oh, when I downloaded it at home I pulled it down at 2.5M
[13:22:14] <ryanneufeld> here at work.. 600k
[13:22:15] <ryanneufeld> fml
[13:22:17] <johnbender> ryanneufeld: we need to get our hands on the puppet labs squeeze but it's hard to do better than 300mb or thereabouts
[13:22:34] <ryanneufeld> yeah
[13:22:42] <ryanneufeld> I thought it was bigger than it is
[13:22:50] <ryanneufeld> at home it downloaded way faster
[13:23:04] <ryanneufeld> where does it store them?
[13:23:12] <johnbender> ~/.vagrant.d
[13:23:20] <johnbender> ryanneufeld: are you on windows?
[13:23:20] <ryanneufeld> I could symlink that to my dropbox :p
[13:23:25] <ryanneufeld> eff no
[13:23:28] <ryanneufeld> ew
[13:23:29] <johnbender> :P
[13:23:41] <mikesherov> DaveMethvin: fired once for me
[13:23:51] <ryanneufeld> osx for workstation, linux for servers, and windows for my parents :p
[13:24:22] <tbranyen> linux for workstation, linux for servers, linux for my parents
[13:24:40] <DaveMethvin> mikesherov: yeah, just once but interactive, and jquery didn't load  .... now run that test in any other browser but ie10
[13:25:05] <DaveMethvin> oh i forgot to say, hit refresh
[13:25:10] <DaveMethvin> it will load correctly the first time
[13:25:11] <DaveMethvin> duh
[13:25:24] <ryanneufeld> tbranyen: I used to use linux on my notebooks, but I got tired of the batteries not lasting as long as in windows, and having to piss around to get all the features working.
[13:25:29] <DaveMethvin> it has to do with whether the file is cached mikesherov
[13:25:41] <tbranyen> ryanneufeld: probably had your governor set up odd
[13:25:45] <mikesherov> sure
[13:26:05] <ryanneufeld> tbranyen: I spend 3.5yrs playing with them... I used gentoo for most of that
[13:26:12] <mikesherov> DaveMethvin: it fired DomContentLoaded while readyState was interactive, then lazy loaded jQuery
[13:26:18] <tbranyen> ryanneufeld: thats your first problem lol
[13:26:22] <mikesherov> but got a 304
[13:26:35] <DaveMethvin> did you get the ERROR case?
[13:26:39] <mikesherov> yes
[13:26:53] <DaveMethvin> yeah, so even though jQuery should have been defined, it wasn't
[13:27:01] <mikesherov> but not sure why we care about what LAB does
[13:27:12] <DaveMethvin> this is affecting LAB.js, it's having similar probs to ours
[13:27:17] <mikesherov> oh, right
[13:27:18] <mikesherov> sure
[13:27:28] <DaveMethvin> we're not alone in the world!! :D
[13:27:32] <mikesherov> there are definitely problems with IE10
[13:27:37] <mikesherov> we discovered this already
[13:27:45] <mikesherov> but I think LAB is trying to be smarter than us
[13:29:01] <ryanneufeld> johnbender: when doing a vagrant up jq01.stage I noticed "/tmp/vagrant-shell: line 19: [: 1.0-5: unary operator expected"
[13:29:36] <DaveMethvin> well a client is asking me why their site is broken in ie10 and thank goodness it wasn't us :D
[13:29:42] <mikesherov> DaveMethvin: they use a completely different check
[13:29:45] <ryanneufeld> johnbender: Could not parse for environment production: No file(s) found for import of 'augeas' at /tmp/vagrant-puppet/manifests/modules.pp:2 on node jq01.stage.jquery.com
[13:30:22] <ryanneufeld> we actually stopped using LAB, switched to modernizr and yepnope
[13:30:48] <mikesherov> labjs completely relies on onreadystatechange instead of observing document.readyState (except in the case of attaching)
[13:31:36] <DaveMethvin> oh i agree, LAB is old news
[13:31:48] <DaveMethvin> but you can't change the rules about document.readyState
[13:31:59] <mikesherov> but I don't know that IE10 did
[13:31:59] <DaveMethvin> which seems to be happening here
[13:32:15] <mikesherov> IE10 goes interactive before the scripts are fully ran
[13:32:26] <DaveMethvin> well that code works fine everywhere else but ie10
[13:32:29] <mikesherov> Sure
[13:32:41] <mikesherov> I guess they are trying to conform to intent of the spec?
[13:32:46] <mikesherov> I don't fucking know!
[13:33:00] <DaveMethvin> i think they were after the same thing we were, which was to be ready asap
[13:33:06] <mikesherov> right
[13:33:12] <DaveMethvin> but the world can't handle the TRUTH
[13:33:27] <mikesherov> but the problem is that DomContentLoaded can fire while the doc is still interactive
[13:33:33] <DaveMethvin> i agree
[13:33:34] <mikesherov> there is nothing that says it can't
[13:33:48] <mikesherov> and it actually makes sense for certain scenarios
[13:34:07] <mikesherov> document.readyState == "complete" specifically says "all subresources are loaded"
[13:34:14] <mikesherov> which includes iframes and other nonsense
[13:34:57] <mikesherov> document . readyState
[13:34:57] <mikesherov> Returns "loading" while the Document is loading, "interactive" once it is finished parsing but still loading sub-resources, and "complete" once it has loaded.
[13:35:02] <mikesherov> but it's non-normative anyway
[13:35:04] <mikesherov> so....
[13:35:49] <mikesherov> Each document has a current document readiness. When a Document object is created, it must have its current document readiness set to the string "loading" if the document is associated with an HTML parser, an XML parser, or an XSLT processor, and to the string "complete" otherwise. Various algorithms during page loading affect this value. When the value is set, the user agent must fire a simple event named readystatech
[13:35:50] <mikesherov> object.
[13:36:37] <mikesherov> I mean, DomContentLoaded isn't what we all think it should be
[13:37:04] <DaveMethvin> well if the world is now depending on it to be what we thought it shoudl be, then it damn well better be that
[13:37:06] <DaveMethvin> :D
[13:37:43] <mikesherov> https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/DOMContentLoaded
[13:37:45] <gnarf> hey
[13:37:58] <mikesherov> so here are the questions:
[13:38:14] <mikesherov> 1. when DomContentLoaded, do we expect all scripts to have been executed?
[13:38:42] <mikesherov> 2. when readyState === "interactive", do we expect the full page to have been parsed?
[13:39:09] <mikesherov> IE10 and IE9 say no
[13:39:16] <mikesherov> everyone else, yes
[13:40:25] <gnarf> ryanneufeld: johnbender: you rang? :)
[13:40:34] <ryanneufeld> gnarf:
[13:40:34] <ryanneufeld> yeah
[13:40:42] <mikesherov> IE8, IE7, IE6 are even worse, in that they fire onreadystatechange a little prematurely too
[13:40:46] <mikesherov> which is why: 		if ( !document.body ) {
[13:40:46] <mikesherov> 			return setTimeout( jQuery.ready, 1 );
[13:40:47] <mikesherov> 		}
[13:41:32] <ryanneufeld> gnarf: what is my deliverable here: https://github.com/jquery/infrastructure/issues/68
[13:41:55] <DaveMethvin> yeah i think ppl expect any scripts that were in the page (or injected via document write or in script tags) to have been loaded/executed fully at that point
[13:42:05] <mikesherov> PEOPLE
[13:42:09] <mikesherov> people who need people
[13:42:18] <mikesherov> so that's where we are borked
[13:42:25] <gnarf> ryanneufeld: a working knowledge of how to set it up / check with ajpiano about what they are doing right now for testing these wordpress machines and see if we can't make it easy to get a VM for them
[13:42:29] <DaveMethvin> mikesherov: this just seems wrong to me http://wnd8.com/grab/99e8ab.png
[13:42:43] <DaveMethvin> added some more logging to the page
[13:42:45] <ryanneufeld> ok
[13:42:59] <mikesherov> no, DaveMethvin: that is fine
[13:43:06] <ryanneufeld> gnarf: I'm getting Could not parse for environment production: No file(s) found for import of 'augeas' at /tmp/vagrant-puppet/manifests/modules.pp:2 on node jq01.stage.jquery.com
[13:43:15] <mikesherov> DomContentLoaded and interactive is fine
[13:43:20] <ryanneufeld> gnarf: on standing up jq01
[13:43:23] <mikesherov> the order of event and state changes is fine
[13:43:24] <ryanneufeld> gnarf: on standing up jq01.stage rather
[13:43:26] <gnarf> hrm
[13:43:31] <mikesherov> the problem is how we interpret that
[13:43:36] <DaveMethvin> lol always
[13:43:42] <mikesherov> What I mean is
[13:43:44] <gnarf> ryanneufeld: have you git submodule update --init ?
[13:43:49] <mikesherov> the order would be the same in FF
[13:43:52] <mikesherov> the order is fine
[13:44:00] <gnarf> ryanneufeld: the puppet branch has a LOT of submodules you need to grab too
[13:44:03] <ryanneufeld> gnarf: lolwut
[13:44:28] <mikesherov> the problem is that none of those events or states purport to indicate anything about script execution state
[13:44:30] <gnarf> like it becomes /etc/puppet - but the modules/ folder points to a bunch of puppet modules in other git repos
[13:44:40] <gnarf> so you need to "git submodule update --init" in the root of the checkout
[13:44:47] <ryanneufeld> oh
[13:45:00] <ryanneufeld> I forked it, that shouldn't matter should it?
[13:45:21] <DaveMethvin> mikesherov: yeah i know but i think the assumption of most people is that a script before the /body has run
[13:45:34] <mikesherov> right
[13:45:40] <ryanneufeld> gnarf: okay, that's doing stuff, installing all the keyloggers and stuff I assume
[13:45:46] <mikesherov> which is why IE10 breaks convention, but not a spec
[13:46:00] <DaveMethvin> and in fact, it almost HAS to be, since if that script writes some html it will change what has to be parsed
[13:46:08] <mikesherov> sure
[13:46:12] <DaveMethvin> the test case had nothing but script at the bottom
[13:46:27] <DaveMethvin> which of course is the bestest case evar for the edge case we're encountering here
[13:46:28] <mikesherov> I think that's the problem
[13:46:38] <DaveMethvin> the browser is saying, "hey no html left, i am LOADED man"
[13:46:50] <mikesherov> right
[13:46:55] <DaveMethvin> but the script can be, like, WAIT, i have some html to give you
[13:46:59] <mikesherov> right
[13:47:07] <gnarf> ryanneufeld: fork shouldn't matter, no
[13:47:18] <gnarf> ryanneufeld: submodules are kind of a pain to work with btw
[13:47:18] <mikesherov> anyway, what should we do
[13:47:27] <ryanneufeld> gnarf: Failed to execute generator /usr/bin/pwgen: Execution of '/usr/bin/pwgen 20 1' returned 1:  at /vagrant/modules/mysql/manifests/server.pp:195 on node jq01.stage.jquery.com
[13:47:32] <gnarf> but it makes too much sense for this type of thing
[13:47:35] <mikesherov> first, we should revert my interactive hack to reduce complexity of the situation
[13:47:37] <gnarf> apt-get install pwgen ?
[13:47:50] <DaveMethvin> yeah i think we have to retreat, esp since ie10 is aggravating this
[13:47:51] <ryanneufeld> shouldn't that be in the puppet conf?
[13:47:58] <gnarf> ryanneufeld: probably if it fixes it
[13:48:10] <gnarf> i think its needed on the "puppet master"
[13:48:24] <gnarf> but since vagrant doesn't use a master, its going to be needed on each machine
[13:48:31] <gnarf> maybe in the vagrant files?
[13:48:44] <ryanneufeld> hmm
[13:48:50] <mikesherov> second, we should reconsider this, in light of IE10 https://github.com/jquery/jquery/blob/master/src/core.js#L841
[13:49:02] <mikesherov> I think instead of positive check for addEventListener
[13:49:06] <ryanneufeld> could put it in the puppet manifest
[13:49:12] <mikesherov> we should do negative check for attachEvent
[13:49:48] <DaveMethvin> hmmm, but even that enough?
[13:49:51] <mikesherov> force all IE down the same path of onreadystatechange
[13:50:08] <mikesherov> test it out
[13:50:15] <DaveMethvin> i mean, readystate complete still seems to be not working
[13:50:38] <mikesherov> but when
[13:50:42] <mikesherov> when is the key
[13:50:50] <DaveMethvin> WHEN!
[13:51:01] <mikesherov> I wonder if onreadystatechange fires correctly vs. DomContentLoaded
[13:51:14] <mikesherov> they may both be "complete" by that point, but so what
[13:51:20] <mikesherov> we know "complete" is a liar
[13:51:24] <mikesherov> maybe it's timing
[13:51:59] <mikesherov> Ohhh
[13:52:07] <mikesherov> I see why you're talking about LAB
[13:52:23] <mikesherov> the bug there is that reasystatechange for the script load is even firing too early
[13:52:25] <mikesherov> UGHGHGHGHGHHGHG
[13:52:47] <DaveMethvin> yes, we can't trust ANYTHING
[13:53:33] <DaveMethvin> and in fact, depending on how that stuff is done, the fact the script blick fires readystate too soon may be why the doc fires readystate too soon
[13:54:02] <DaveMethvin> but i dunno
[13:54:03] <gnarf> ryanneufeld: go for it
[13:54:10] <gnarf> ryanneufeld: just make sure it runs before its needed :)
[13:54:25] <ryanneufeld> yeah, testing that now
[13:54:46] <ryanneufeld> I put it right after the sudo package
[13:54:52] <mikesherov> DaveMethvin: can you test the onreadystatechange theory?
[13:55:33] <ryanneufeld> gnarf: :s /tmp/vagrant-shell: line 19: [: 1.0-5: unary operator expected
[13:55:38] <DaveMethvin> should be possible mikesherov, i can remove lab.js and do it myself
[13:55:43] <DaveMethvin> easier test case too
[13:55:46] <mikesherov> k
[13:56:46] <gnarf> ryanneufeld: hrm
[13:58:02] <gnarf> ryanneufeld: that sounds like maybe something is using /bin/sh instead of /bin/bash ?
[13:59:54] <gnarf> danheberden: you around?
[14:00:33] <johnbender> ryanneufeld: check vagrant/bin/update-puppet.sh
[14:00:59] <johnbender> ryanneufeld: /tmp/vagrant-shell is where it vagrant puts shell based provisioners
[14:01:07] <johnbender> ryanneufeld: unless that's what you're modifying
[14:01:37] <johnbender> ryanneufeld: I have to step out
[14:02:50] <ryanneufeld> update-puppet doesn't have any kind of a shell at the top
[14:03:43] <johnbender> ryanneufeld: you can ssh into the vm and check /tmp/vagrant-shell
[14:03:50] <johnbender> ryanneufeld: vagrant ssh
[14:04:33] <ryanneufeld> yeah, same script
[14:04:42] <ryanneufeld> no shabang
[14:04:47] <ryanneufeld> #!
[14:05:13] <ryanneufeld> is a reload sufficient to run through the setup again?
[14:06:17] <johnbender> ryanneufeld: vagrant provision
[14:06:23] <johnbender> ryanneufeld: no need to reload
[14:06:36] <ryanneufeld> ah
[14:06:36] <ryanneufeld> thanks
[14:07:54] <mikesherov> .
[14:10:08] <gnarf> mikesherov - still here?
[14:10:25] <gnarf> DaveMethvin: where are we at with the output buffering thing?
[14:10:50] <DaveMethvin> it would be good to have for testing but we backed out that test
[14:10:53] <gnarf> I'd like to avoid having to tweak the nginx config for that - it seems like it would drastically lower the performance
[14:11:03] <ryanneufeld> gnarf: if I change the puppet manifest, I should only have to reprovision, correct?
[14:11:04] <DaveMethvin> yeah if it can't be page by page
[14:11:41] <DaveMethvin> i think you can take it off the list for now,
[14:11:51] <DaveMethvin> we've got so many other issues :)
[14:11:59] <gnarf> ryanneufeld: i assume so -- in my world, i "puppet agent --test" but on the vagrant box i think its a puppet apply, either way, i think the vagrant setup actually does the puppet command when you provision
[14:12:28] <gnarf> DaveMethvin: ok, i'll revisit
[14:14:21] <ryanneufeld> gnarf: do I need puppet on the host machine?
[14:15:40] <gnarf> ryanneufeld: you shouldn't
[14:15:48] <gnarf> i think vagrant is using puppet apply
[14:15:51] <gnarf> johnbender: ^^^ ?
[14:18:02] <ryanneufeld> gnarf: I gotta get back to the day job for a few hours now, catch up later
[14:29:15] <scott_gonzalez> GUYS! I THINK I FOUND A PROBLEM!
[14:29:36] <scott_gonzalez> http://bugs.jquery.com/newticket is too nice and puts focus on the summary line
[14:29:51] <scott_gonzalez> Don't do that. Shove the big red box in the user's face.
[14:32:37] <mikesherov> LOL
[14:32:57] <mikesherov> WE SHOULD ALERT "DID YOU PUT A FUCKING LINK TO A FIDDLE LIKE WE ASKED?????!?!??!?"
[14:33:02] <scott_gonzalez> haha
[14:46:56] <ryanneufeld> Make a jsfiddle a required feild
[14:47:25] <scott_gonzalez> That's a bit rough.
[14:47:46] <ryanneufeld> is it?
[14:48:03] <scott_gonzalez> Well, it would mean that you can't file enhancement tickets anymore.
[14:48:23] <scott_gonzalez> And the investigation tickets that the core team loves to create.
[14:48:29] <ryanneufeld> you have a drop down for bugs
[14:48:41] <ryanneufeld> so... make it required if type == bug
[14:48:42] <scott_gonzalez> I think we'd need an Trac extension for that.
[14:48:55] <scott_gonzalez> Trac doens't have conditional fields.
[14:49:08] <ryanneufeld> bah
[14:51:00] <doesallmagic> Project jQuery Color build #73: FAILURE in 5.5 sec: http://swarm.jquery.org:8080/job/jQuery%20Color/73/
[14:51:00] <doesallmagic> Corey Frang: Replace jQuery option with jQuery global so that $ isn't a valid global
[14:52:43] <mikesherov> DaveMethvin: https://github.com/jquery/jquery/pull/907
[14:52:52] <ryanneufeld> scott_gonzalez: but wouldn't it be awesome if you could do it?
[14:52:53] <mikesherov> and then can we close the android 2.1 bug?
[14:53:03] <mikesherov> or do we have to wait for Todd Parker to confirm???
[14:53:21] <DaveMethvin> we should wait for todd or someone to tell us it's fixed mikesherov
[14:53:23] <scott_gonzalez> It'd probably be good to have Todd confirm
[14:53:23] <DaveMethvin> thanks
[14:53:38] <DaveMethvin> i am having a tough time creating a reduced case
[14:53:45] <scott_gonzalez> ryanneufeld: perhaps
[14:53:47] <mikesherov> but my OCD senses are tingling.
[14:53:54] <DaveMethvin> as you might expect with something timing related
[14:53:58] <mikesherov> let's tell him to retest after we pull in my change
[14:54:12] <DaveMethvin> which i will do very soon
[14:58:23] <mikesherov> OK, scott_gonzalez, do you still have a reference to that css.width() ticket you had me look at?
[14:58:55] <scott_gonzalez> yeah, one sec
[14:59:17] <scott_gonzalez> https://github.com/jquery/jquery-ui/pull/713
[14:59:27] <scott_gonzalez> hmm...the reporter closed the PR
[15:03:22] <mikesherov> I think he was mistaken about the real problem
[15:03:39] <mikesherov> but you had an example of .css('width') doing the wrong thing?
[15:04:49] <scott_gonzalez> Yeah, there's a link to a fiddle, but I think it was only with padding-box.
[15:05:33] <scott_gonzalez> http://jsfiddle.net/Jenqr/3/
[15:06:08] <mikesherov> ok, great
[15:06:12] <scott_gonzalez> You had forked that and make one without padding-box and I'm pretty sure it worked.
[15:06:24] <mikesherov> yes, it did
[15:06:30] <mikesherov> just wanted to make sure that was the end of it
[15:06:42] <mikesherov> don't need another 1.8 fire on my hands :-)
[15:07:05] <scott_gonzalez> heh
[15:28:45] <doesallmagic> Yippie, build fixed!
[15:28:46] <doesallmagic> Project jQuery Color build #74: FIXED in 26 min: http://swarm.jquery.org:8080/job/jQuery%20Color/74/
[15:28:46] <doesallmagic> Corey Frang: Oops, globals aren't really options... lame...
[15:31:28] <doesallmagic> Project jQuery Color build #75: SUCCESS in 2 min 41 sec: http://swarm.jquery.org:8080/job/jQuery%20Color/75/
[15:31:29] <doesallmagic> * Corey Frang: adding a function called hook to allow defining a color based hook after setup
[15:31:29] <doesallmagic> * Corey Frang: Switch from $ to jQuery in readme, add notes about .hook
[15:31:30] <doesallmagic> * Corey Frang: Unit tests for 77a68da41381634a507ca102efeac097a3d6f504
[15:33:36] <johnbender> ryanneufeld: back
[15:33:44] <ryanneufeld> wb
[15:34:51] <ryanneufeld> so it seems that the base vm is missing one package
[15:34:59] <ryanneufeld> I think I can fix it though
[15:34:59] <johnbender> ryanneufeld: which is?
[15:35:03] <ryanneufeld> pwgen
[15:35:11] <johnbender> and what is that a dep of?
[15:35:27] <ryanneufeld> gnarf: Failed to execute generator /usr/bin/pwgen: Execution of '/usr/bin/pwgen 20 1' returned 1:  at /vagrant/modules/mysql/manifests/server.pp:195 on node jq01.stage.jquery.com
[15:35:55] <johnbender> ryanneufeld: so it looks like the puppet manifest should ensure that it's present right?
[15:36:03] <ryanneufeld> yes, it should
[15:36:11] <ryanneufeld> I've added it to the mysql.pp file
[15:36:19] <ryanneufeld> but that doesn't seem to have worked
[15:37:35] <johnbender> :(
[15:38:35] <doesallmagic> Project jQuery Color build #76: SUCCESS in 7 min 6 sec: http://swarm.jquery.org:8080/job/jQuery%20Color/76/
[15:40:06] <ryanneufeld> johnbender: I'm thinking I'll add it to the update-puppet.sh script
[15:41:36] <ryanneufeld> unrelated query: dod you guys change the config on your jenkins instance to have green bubbles?
[15:41:43] <ryanneufeld> ours only turn blue
[15:43:27] <johnbender> ryanneufeld: jenkins version update I think
[15:43:29] <johnbender> not sure
[15:43:35] <johnbender> ryanneufeld: and I wouldn't put that in puppet
[15:43:36] <johnbender> err
[15:43:38] <ryanneufeld> green balls plugin it seems
[15:43:40] <johnbender> the update-puppet.sh
[15:43:48] <ryanneufeld> okay
[15:44:04] <johnbender> I would put that in the puppet manifest since it needs to be there regardless of whether this is running on vagrant or not
[15:44:14] <johnbender> gnarf: ^^
[15:44:18] <johnbender> unless it's vagrant specific
[15:44:20] <johnbender> for some reason
[15:44:40] <johnbender> in which case I would put it in a separate bin/*.sh and add a new provisioning line to the Vagrantfile
[15:44:51] <gnarf> ryanneufeld: "green balls" plugin
[15:44:53] <ryanneufeld> johnbender: it's needed for vagrant it seems
[15:44:56] <gnarf> for jenkins
[15:45:04] <ryanneufeld> gnarf: yeah, installed it
[15:45:24] <gnarf> johnbender: pwgen is installed by default on the image we are using which is why it wasn't in the manifest
[15:45:28] <ryanneufeld> I'll make a new script, add it to the Vagrant file
[15:45:33] <gnarf> I might be able to work around it
[15:45:36] <johnbender> ryanneufeld: it's need because the base box doesn't ahve it installed by default or it's needed because the Vagrant specifically does something that requires it?
[15:45:43] <gnarf> but just adding it to the update-puppet might make more sense
[15:45:54] <johnbender> hmm
[15:45:57] <gnarf> johnbender: puppet uses pwgen to convert plain text to hashes
[15:45:59] <ryanneufeld> I tried adding it to the puppet manifest
[15:46:02] <ryanneufeld> with no luck
[15:46:09] <ryanneufeld> seems to be needed before puppet runs
[15:46:12] <johnbender> gnarf: that's part of the required sate of the machines outside vagrant
[15:46:19] <johnbender> that should be in the manifest imo
[15:46:22] <johnbender> it's a no op on the image
[15:46:25] <gnarf> ryanneufeld: you might have to "before => Class["ThatUsesPwgen"]" on the package
[15:46:29] <johnbender> but if you change images it will be necessary
[15:46:36] <gnarf> agree
[15:46:43] <gnarf> ryanneufeld: or
[15:46:47] <gnarf> find the thing that is using it
[15:46:55] <gnarf> and have it require => Package["pwgen"]
[15:47:00] <gnarf> that might work
[15:47:07] <johnbender> that's probably better
[15:47:23] <gnarf> require is usually smarter
[15:47:30] * johnbender agress
[15:47:35] * johnbender agrees
[15:47:40] <johnbender> less goto, more dependency
[15:47:51] <johnbender> will I should say "comefrom"
[15:47:55] <gnarf> i'm concerned with that one in particular tho
[15:48:08] <johnbender> *well
[15:48:08] <gnarf> because it might actually use it while compiling the manifest
[15:48:22] <gnarf> in which case, its never going to be able to install it before it complains about not having it
[15:48:42] <johnbender> gnarf: I thought the manifests were compiled on the puppet master
[15:48:43] <ryanneufeld> right
[15:48:55] <johnbender> but I see you point
[15:49:03] <johnbender> *your
[15:49:37] <gnarf> johnbender: they are, and the master has the pwgen ;)
[15:50:14] <johnbender> if that's the case then it's definitely vagrant specific :D
[15:50:23] <gnarf> if it can't be done via puppet alone, it should probably be done via the vagrant pre-hooks
[15:50:37] <gnarf> puppet first tho - if it can be done there, it should be
[15:50:50] <ryanneufeld> yeah
[15:51:37] <ryanneufeld> put it in default.pp ?
[16:06:36] <johnbender> gnarf: ryanneufeld: if that's required as a dep for puppet to opperate properly it seems like it would be a package dependency now that I think about it
[16:06:48] <johnbender> though it may just be a diffence between the master and local
[16:07:24] <johnbender> that is, the different ways to run puppet might have different dependencies by default for whatever reason
[16:08:26] <johnbender> that's one differenc between the way that the Vagrant instances are set up currently that may figure in down the road
[16:09:04] <johnbender> maybe we can stage a puppet master if Vagrant proves to be useful
[16:09:06] <ryanneufeld> hm
[16:09:24] <johnbender> ryanneufeld: it's not too likely to matter
[16:16:06] <ryanneufeld> yeah. adding it to the mysql server.pp didn't work
[16:17:39] <ryanneufeld> johnbender: https://gist.github.com/3443296
[16:20:46] <gnarf> ryanneufeld: whats the git diff on the mysql server.pp ?
[16:21:11] <gnarf> did you package { "pwgen": ensure => present }   and then add require => Package["pwgen"] to the thing using it?
[16:21:31] <ryanneufeld> I did
[16:21:54] <johnbender> I'm going to take a quick look
[16:22:20] <ryanneufeld> gnarf: https://gist.github.com/3443367
[16:22:23] <gnarf> cool, i actually am semi-afk so, will check in again in a bit
[16:22:28] <ryanneufeld> k
[16:23:23] <gnarf> hrm
[16:23:25] <gnarf> $mysql_password = generate("/usr/bin/pwgen", 20, 1)
[16:23:28] <gnarf> thats the line breaking it
[16:25:25] <gnarf> http://docs.puppetlabs.com/references/stable/function.html#generate
[16:25:48] <gnarf> so it runs "server side"
[16:25:54] <gnarf> so it only needs to be on the puppet master
[16:26:01] <gnarf> (which i think is already defined on citadel?)
[16:26:18] <ryanneufeld> where is the puppet master in this case
[16:26:22] <gnarf> but since each vagrant is its own master, we might just want to put it in the init
[16:26:22] <ryanneufeld> if I'm running it locally
[16:26:27] <ryanneufeld> ah
[16:26:34] <gnarf> johnbender: ^^^^
[16:26:49] <gnarf> i don't think any amount of puppeting will solve this because that generate call happens compile time, not apply time
[16:26:56] <johnbender> gnarf: is the mysql dep only for the puppet master?
[16:27:10] <johnbender> gnarf: yah the diff isn't helpful
[16:27:12] <johnbender> err
[16:27:13] <johnbender> gist
[16:27:20] <johnbender> it dies before anything runs
[16:27:37] <gnarf> johnbender: anything using mysql
[16:27:51] <gnarf> pwgen only needs to be on the master tho
[16:27:57] <gnarf> and tbh - we could probably avoid this
[16:28:14] <gnarf> if we were to specify a $mysql_password for the server
[16:28:24] <gnarf> instead of letting it generate it
[16:28:33] <johnbender> still seems odd that it's not a dep of the package
[16:28:35] <gnarf> because that pwgen is inside of an if
[16:28:59] <gnarf> johnbender: well its not the package itself using it, its the master needing it to generate a default password if you don't pass it one
[16:29:12] <johnbender> gnarf: the puppet master right?
[16:29:18] <johnbender> I meant the puppet master package
[16:29:29] <johnbender> or the puppet package
[16:29:32] <gnarf> johnbender: its not puppet that needs it, its the mysql package
[16:29:35] <gnarf> er sorry
[16:29:37] <gnarf> mysql module
[16:30:01] <johnbender> are there puppet hooks into the compile phase?
[16:30:06] <johnbender> i'm missing something
[16:30:21] <gnarf> johnbender: "generate()" calls shells out on the master and puts the output in a variable
[16:30:44] <gnarf> $mysql_password = generate("/usr/bin/pwgen", 20, 1) <--- calls "/usr/bin/pwgen 20 1" and assigns it to $mysql_password
[16:30:48] <johnbender> right, I'm asking why that can't happen during the normal puppet run
[16:30:56] <johnbender> and not during the compilation phase
[16:31:16] <gnarf> It probably could be? But I didn't write that module
[16:31:29] <gnarf> tbh - we could just define a root password when we include mysql::server
[16:31:36] <gnarf> and it would work without having to tweak anything else
[16:31:44] <gnarf> ryanneufeld: which machine are you playing with? jq01?
[16:31:51] <ryanneufeld> jq01.stage
[16:31:53] <johnbender> jq01.stage
[16:32:47] <johnbender> this is going to bother me
[16:32:56] <johnbender> ryanneufeld: proceed with whichver you like
[16:33:01] <johnbender> Vagrant or definning a password
[16:33:16] <johnbender> I still want to know why that generate runs during the compile and not during the regular run
[16:33:20] <johnbender> doesn't make any sense to me
[16:33:33] <johnbender> I mean
[16:33:33] <gnarf> https://github.com/jquery/infrastructure/blob/puppet-master/modules/wordpress/manifests/init.pp#L11
[16:33:44] <gnarf> johnbender: it seems poorly written to depend on pwgen on the master
[16:33:46] <johnbender> it does given then declaritive nature of puppet but it would be nice to have later binding
[16:33:47] <gnarf> johnbender: me neither but thats what was there in the mysql module already
[16:34:01] <gnarf> ryanneufeld: you could try adding, mysql_password="some root password for mysql"
[16:34:03] <ryanneufeld> gnarf: tf am i looking at here
[16:34:24] <johnbender> I'm for dumping it in the Vagrantfile and appologizing that I took up so much of yours and ryanneufeld's rime :(
[16:34:46] <johnbender> s/rime/time/
[16:34:53] <ryanneufeld> meh, doesn't matter, I'd rather have a 'clean' sorution
[16:35:04] <gnarf> johnbender: it seems like the smart play to just apt-get install it from Vagrantfile for now
[16:35:04] <ryanneufeld> s/clean/crean
[16:35:09] <gnarf> we can fix it later? document the issue?
[16:35:17] <ryanneufeld> gnarf: That's the solution I found so far
[16:35:17] <johnbender> gnarf: absolutely
[16:35:30] <johnbender> ryanneufeld: maybe another .sh file
[16:35:39] <johnbender> or you can just rename the other one if you like
[16:35:40] <johnbender> up to you
[16:35:49] <gnarf> anyway, peace out - ping me on gtalk if you really need me ;)
[16:35:50] <ryanneufeld> I added another one
[16:35:52] <ryanneufeld> later
[16:35:56] <johnbender> gnarf: thanks!
[16:41:13] <ryanneufeld> I'm not confident that I should be merging pulls yet https://github.com/jquery/infrastructure/pull/70 johnbender ?
[16:48:52] <johnbender> ryanneufeld: I'm not even sure I'm alowed to lol
[16:48:55] <johnbender> let me look
[16:50:03] <johnbender> ryanneufeld: banm
[16:50:05] <johnbender> *bam
[16:50:32] * johnbender has noticed a precipitous drop off in his typing accuracy
[16:52:24] <ryanneufeld> ?BOOM
[16:52:25] <bot-t> "Did you are unimpressed? and now?"
[16:52:50] <ryanneufeld> ?hi5
[16:52:50] <bot-t> â‹°âµâ‹±
[16:53:18] <johnbender> ryanneufeld: I'm going to look into late binding those types of things in the manifests if for no other reason than it would be nice to learn a bit more about the puppet run cycle
[16:53:28] <ryanneufeld> yeah
[16:53:28] <johnbender> ryanneufeld: feel free to do the same if you're interested :D
[16:53:31] <ryanneufeld> I will
[16:53:42] <ryanneufeld> I have a friend who is an expert in this stuff
[16:53:46] <ryanneufeld> works for mozilla now :P
[17:31:38] <jqcommit> [jquery] dmethvin pushed 1 new commit to master: http://git.io/P8nM8A
[17:31:38] <jqcommit> [jquery/master] Scorch the earth and retreat on readyState interactive! Close gh-907. - Mike Sherov
[18:01:55] <doesallmagic> Project jQuery Core build #332: STILL FAILING in 30 min: http://swarm.jquery.org:8080/job/jQuery%20Core/332/
[18:01:55] <doesallmagic> dave.methvin: Scorch the earth and retreat on readyState interactive! Close gh-907.
[18:21:06] <DaveMethvin> doesallmagic: you lyin sack o bits, this ain't failin: http://swarm.jquery.org/job/590
[18:21:06] <doesallmagic> DaveMethvin did you mean me? Unknown command 'you'
[18:21:06] <doesallmagic> Use '!jenkins help' to get help!
[18:21:23] <DaveMethvin> doesallmagic: NO U
[18:21:24] <doesallmagic> DaveMethvin did you mean me? Unknown command 'NO'
[18:21:24] <doesallmagic> Use '!jenkins help' to get help!
[18:21:38] <DaveMethvin> doesallmagic: !jenkins
[18:21:38] <doesallmagic> DaveMethvin did you mean me? Unknown command '!jenkins'
[18:21:39] <doesallmagic> Use '!jenkins help' to get help!
[18:34:20] <jqcommit> [jquery] dmethvin pushed 1 new commit to master: http://git.io/Casjsw
[18:34:20] <jqcommit> [jquery/master] Fix #11586. Ajax DELETE ain't got no body, so data goes to its URL. - Dave Methvin
[18:58:55] <mikesherov> .
[19:04:33] <doesallmagic> Project jQuery Core build #333: STILL FAILING in 30 min: http://swarm.jquery.org:8080/job/jQuery%20Core/333/
[19:04:34] <doesallmagic> dave.methvin: Fix #11586. Ajax DELETE ain't got no body, so data goes to its URL.
[19:20:24] <jqcommit> [jquery] dmethvin pushed 1 new commit to master: http://git.io/xm5dIw
[19:20:24] <jqcommit> [jquery/master] Fix #10863. Allow newlines in JSON data- attributes. - Dave Methvin
[19:51:00] <doesallmagic> Project jQuery Core build #334: STILL FAILING in 30 min: http://swarm.jquery.org:8080/job/jQuery%20Core/334/
[19:51:01] <doesallmagic> dave.methvin: Fix #10863. Allow newlines in JSON data- attributes.
[20:28:38] <jqcommit> [jquery] dmethvin pushed 1 new commit to master: http://git.io/cvYtAw
[20:28:38] <jqcommit> [jquery/master] Fix #12120. Always stack .before/.after, and fix disconnected nodes. - Dave Methvin
[20:58:46] <doesallmagic> Project jQuery Core build #335: STILL FAILING in 30 min: http://swarm.jquery.org:8080/job/jQuery%20Core/335/
[20:58:46] <doesallmagic> dave.methvin: Fix #12120. Always stack .before/.after, and fix disconnected nodes.
